!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/platform-browser"),require("@angular/core"),require("@angular/forms")):"function"==typeof define&&define.amd?define("datepicker-ns",["exports","@angular/platform-browser","@angular/core","@angular/forms"],t):t(e["datepicker-ns"]={},e.ng.platformBrowser,e.ng.core,e.ng.forms)}(this,function(e,t,n,a){"use strict";var i=(o.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],o.ctorParameters=function(){return[]},o.ngInjectableDef=n.defineInjectable({factory:function(){return new o},token:o,providedIn:"root"}),o);function o(){}var s=(r.prototype.isChild=function(e){var t=e.parentNode;if(!t||"undefined"===t.tagName)return!1;var n=t.tagName;return!(!t||"APP-CALENDAR"!==n)||(t&&"HTML"!==n?this.isChild(t):void 0)},r.prototype.handleClick=function(e){e.stopPropagation(),e.preventDefault(),this.isOpen?this.elRef.nativeElement.contains(e.target)||this.close.emit():this.isOpen=!0},r.decorators=[{type:n.Directive,args:[{selector:"[outside]"}]}],r.ctorParameters=function(){return[{type:n.ElementRef}]},r.propDecorators={close:[{type:n.Output,args:["outside"]}],handleClick:[{type:n.HostListener,args:["document:click",["$event"]]}]},r);function r(e){this.elRef=e,this.close=new n.EventEmitter,this.isOpen=!1}var d=(l.prototype.clickout=function(e){console.log("CLICKOUT"),this.onClickOut.emit()},l.prototype.timeChange=function(e){},l.prototype.submit=function(){this.change()},l.prototype.change=function(){var e={};e=this.selectPeriodEnabled?{dateStart:this.selectedDay.date,dateEnd:this.selectedDay2.date}:{dateStart:this.selectedDay.date,dateEnd:null},console.log("changed",e),this.onChanged.emit(e)},l.prototype.getMonthByNUm=function(e){return this.langs().month[this.lang][e]},l.prototype.ngOnInit=function(){this.selectPeriodEnabled=!!this.options.selectPeriodEnabled&&this.options.selectPeriodEnabled,this.selectPeriodEnabled?(this.initDate=this.dates.dateStart,this.selectedDay={date:this.dates.dateStart,yearDayNum:this.getNumOfYear(this.dates.dateStart)},this.selectedDay2={date:this.dates.dateEnd,yearDayNum:this.getNumOfYear(this.dates.dateEnd)}):(this.initDate=this.dates.dateStart,this.selectedDay={date:this.dates.dateStart,yearDayNum:this.getNumOfYear(this.dates.dateStart)},this.selectedDay2=null),this.monthMode=!0,this.date=new Date(this.initDate),this.currentMonth=new Date(this.date.getFullYear(),this.date.getMonth(),1),this.numDay=this.date.getDay(),this.suggestions=!!this.options.suggestions&&this.options.suggestions,this.disabledBefore=!!this.options.disabledBefore&&this.options.disabledBefore,this.disabledAfter=!!this.options.disabledAfter&&this.options.disabledAfter,this.lang=this.options.lang?this.options.lang:"en",this.weekends=this.options.weekends?this.options.weekends:[5,6],this.weekStart=this.options.weekStart?this.options.weekStart:1,this.submitMode=!!this.options.submitMode&&this.options.submitMode,this.time=this.options.time?this.options.time:{enabled:!1},this.getWeekLabels(),this.showView(this.currentMonth),this.markselectDay(),this.markPeriodDates()},l.prototype.showMonth=function(e,t){t.stopPropagation(),this.showView(e),this.currentMonth=e},l.prototype.getOffsetDaysStart=function(e){return e<this.weekStart?7+e-this.weekStart:e-this.weekStart},l.prototype.langs=function(){return{week:{en:["Su","Mo","Tu","We","Th","Fr","St"],ru:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"]},month:{en:["January","Febrary","March","April","May","June","July","August","September","October","November","December"],ru:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"]}}},l.prototype.getWeekLabels=function(){this.weekLabels=this.langs().week[this.lang],this.weekLabels=this.weekLabels.splice(this.weekStart).concat(this.weekLabels)},l.prototype.isNowDate=function(e){var t=new Date;return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()},l.prototype.showPrev=function(){this.monthMode?(this.currentMonth.setMonth(this.currentMonth.getMonth()-1),this.showView(this.currentMonth)):(this.currentMonth.setFullYear(this.currentMonth.getFullYear()-1),this.showViewMonth(this.currentMonth))},l.prototype.isSelected=function(e){return!(!this.selectedDay||this.selectedDay.date.getFullYear()!==e.getFullYear()||this.selectedDay.date.getMonth()!==e.getMonth()||this.selectedDay.date.getDate()!==e.getDate())},l.prototype.markselectDay=function(){for(var e=0;e<this.calend.length;e++){var t=this.calend[e];this.selectedDay&&this.selectedDay.yearDayNum===t.yearDayNum&&this.selectedDay.date.getFullYear()===t.date.getFullYear()?this.calend[e].isSelected=!0:this.selectedDay2&&this.selectedDay2.yearDayNum===t.yearDayNum&&this.selectedDay2.date.getFullYear()===t.date.getFullYear()?this.calend[e].isSelected=!0:this.calend[e].isSelected=!1}},l.prototype.selectDay=function(e){this.selectPeriodEnabled?this.selectedDay&&this.selectedDay.yearDayNum===e.yearDayNum&&this.selectedDay.date.getFullYear()===e.date.getFullYear()||(this.selectedDay?this.selectedDay&&!this.selectedDay2?this.selectedDay2=e:this.selectedDay&&this.selectedDay2&&(this.selectedDay=e,this.selectedDay2=null):(this.selectedDay=e,this.selectedDay2=null)):this.selectedDay&&this.selectedDay.yearDayNum===e.yearDayNum&&this.selectedDay.date.getFullYear()===e.date.getFullYear()||(this.selectedDay=e),e&&e.date.getMonth()!==this.currentMonth.getMonth()&&(this.currentMonth.setMonth(e.date.getMonth()),this.showView(e.date)),this.markselectDay(),this.selectPeriodEnabled&&this.markPeriodDates(),this.submitMode||this.change()},l.prototype.showNext=function(){this.monthMode?(this.currentMonth.setMonth(this.currentMonth.getMonth()+1),this.showView(this.currentMonth)):(this.currentMonth.setFullYear(this.currentMonth.getFullYear()+1),this.showViewMonth(this.currentMonth))},l.prototype.clickDate=function(e,t){void 0===t&&(t=null),t&&t.stopPropagation(),e.disabled||this.selectDay(e)},l.prototype.markPeriodDates=function(e){void 0===e&&(e=null);for(var t=0;t<this.calend.length;t++){var n=this.calend[t];e&&this.selectedDay&&!this.selectedDay2&&(n.yearDayNum>=e.yearDayNum&&n.yearDayNum<=this.selectedDay.yearDayNum||n.yearDayNum<=e.yearDayNum&&n.yearDayNum>=this.selectedDay.yearDayNum)||this.selectedDay&&this.selectedDay2&&(n.yearDayNum>=this.selectedDay2.yearDayNum&&n.yearDayNum<=this.selectedDay.yearDayNum||n.yearDayNum<=this.selectedDay2.yearDayNum&&n.yearDayNum>=this.selectedDay.yearDayNum)?this.calend[t].markedPeriod=!0:this.calend[t].markedPeriod=!1}},l.prototype.hoverDate=function(e){this.selectedDay&&this.selectPeriodEnabled&&this.markPeriodDates(e)},l.prototype.getDate=function(e){var t=Object.assign(e);return new Date(t.getTime())},l.prototype.getNumOfYear=function(e){var t=new Date(e.getFullYear(),0,0),n=e.valueOf()-t.valueOf();return Math.floor(n/864e5)},l.prototype.showViewMonth=function(e,t){void 0===t&&(t=null),t&&t.stopPropagation();for(var n=e.getFullYear(),a=0;a<4;a++){this.monthCalend[a]=[];for(var i=3*a;i<3*a+3;i++)this.monthCalend[a].push({year:n,month:i,date:new Date(n,i,1)})}this.monthMode=!1},l.prototype.isDisabled=function(e){var t=this.getDate(e);t.setHours(0,0,0,0);var n=this.getDate(new Date);return n.setHours(0,0,0,0),this.disabledBefore?!!(this.disabledBefore&&t.valueOf()<n.valueOf()):!!this.disabledAfter&&!!(this.disabledAfter&&t.valueOf()>n.valueOf())},l.prototype.showView=function(e){this.daysInMonth=this.getDaysInMonth(e),this.daysInPrevMonth=this.getDaysInPrevMonth(e);var t=this.getFirstDayNum(e),n=this.getLastDayNum(e),a=[],i=[],o=this.getDate(e),s=this.getDate(e);s.setMonth(this.getDate(e).getMonth()-1);var r=this.getDate(e);if(r.setMonth(this.getDate(e).getMonth()+1),0!==t)for(var d=t;0<d;d--){var l=this.daysInPrevMonth-d+1,h=new Date(s.getFullYear(),s.getMonth(),l);a.push({num:l,yearDayNum:this.getNumOfYear(h),date:h,currentMonth:!1,isNowDate:this.isNowDate(h),isWeekEnd:this.isWeekEnd(h),disabled:this.isDisabled(h)})}for(d=1;d<=this.daysInMonth;d++){o.setDate(d);var c=new Date(o.getFullYear(),o.getMonth(),d);a.push({num:d,yearDayNum:this.getNumOfYear(c),date:c,currentMonth:!0,isNowDate:this.isNowDate(c),isWeekEnd:this.isWeekEnd(c),disabled:this.isDisabled(c)})}if(6!==n)for(d=1;d<7-n;d++){var u=new Date(r.getFullYear(),r.getMonth(),d);a.push({num:d,yearDayNum:this.getNumOfYear(u),date:u,currentMonth:!1,isNowDate:this.isNowDate(u),isWeekEnd:this.isWeekEnd(u),disabled:this.isDisabled(u)})}for(d=0;d<a.length/7;d++){for(var p=[],y=7*d;y<7*d+7;y++)p.push(a[y]);i.push(p)}this.calend=a,this.weekCalend=i,this.selectPeriodEnabled&&this.markPeriodDates(),this.markselectDay(),this.monthMode=!0},l.prototype.isWeekEnd=function(e){return!!this.weekends.includes(this.getNumDay(e))},l.prototype.getNumDay=function(e){return this.getOffsetDaysStart(e.getDay())},l.prototype.getFirstDayNum=function(e){var t=new Date(e.getFullYear(),e.getMonth(),1).getDay();return this.getOffsetDaysStart(t)},l.prototype.getLastDayNum=function(e){var t=new Date(e.getFullYear(),e.getMonth()+1,0).getDay();return this.getOffsetDaysStart(t)},l.prototype.getDaysInMonth=function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},l.prototype.getDaysInPrevMonth=function(e){return new Date(e.getFullYear(),e.getMonth(),0).getDate()},l.decorators=[{type:n.Component,args:[{selector:"ns-datepicker",template:'<div class="calendar" (outside)="clickout($event)" >\n\n    <div style="border-bottom: 1px solid #f3f3f3; display:flex; flex-direction: row; justify-content: center; align-items:center; padding:10px;flex-direction: column;">\n        <div *ngIf="suggestions" style="display: block;">\n            <button class="dateBtn" (click)="selectDay(today)">сегодня</button>\n        </div>\n      <div style="padding-top:10px; display:flex; flex-direction: row; justify-content: space-between; width: 100%;">\n          <a href="javascript:void(0)" (click)="showPrev()" class="btnPrevNext"><</a>\n          <div class="yearBtn" (click)="showViewMonth(currentMonth, $event)">\n              <span *ngIf="monthMode" style="margin-right:3px">{{getMonthByNUm(currentMonth.getMonth())}}</span> <span>{{currentMonth.getFullYear()}}</span>\n          </div>\n          <a href="javascript:void(0)" (click)="showNext()"  class="btnPrevNext">></a>\n      </div>\n      \n      \n    \n  \n    </div>\n    <div style="padding: 8px 10px;">\n      \n      <div *ngIf="weekLabels&&monthMode" class="row">\n        <div class="col h" *ngFor="let label of weekLabels">\n          {{label}}\n        </div>\n      </div>\n  \n  \n      <div *ngIf="weekCalend&&monthMode">\n        <div class="row" *ngFor="let week of weekCalend">\n            <div \n              *ngFor="let day of week" \n              class="col" \n              [ngClass]="{currentMonth:day.currentMonth, isNowDate: day.isNowDate, isWeekEnd: day.isWeekEnd, isSelected: day.isSelected, markedPeriod: day.markedPeriod, disabled: day.disabled }" \n              (click)="clickDate(day, $event)"\n              (mouseover)="hoverDate(day)"\n            >\n            {{day.num}}\n            <div></div>\n          </div>\n        </div>     \n      </div>\n  \n  \n      <div *ngIf="monthCalend&&!monthMode">\n        <div class="row" *ngFor="let months of monthCalend">\n            <div \n              *ngFor="let month of months"\n              class="col month"\n              (click)="showMonth(month.date, $event)"\n            >\n            {{getMonthByNUm(month.month)}} \n            </div>\n        </div>     \n      </div>\n  \n    </div>\n    <div *ngIf="time&&time.enabled" style="border-bottom: 1px solid #f3f3f3; display:flex; flex-direction: column; justify-content: center; padding:10px; font-size: 11px">\n        \n      <div *ngIf="selectedDay" >\n        <ns-time [date]="selectedDay" changed="timeChange(data)"></ns-time>\n      </div>\n\n      <div *ngIf="this.selectedDay2" >\n        <ns-time [date]="selectedDay2" changed="timeChange(data)"></ns-time>\n      </div>\n    </div>\n\n\n    <div *ngIf="time.enabled||(!time.enabled&&submitMode)" style=" display:flex; flex-direction: row; justify-content: space-between; align-items:center; padding:10px; font-size: 11px">\n      <button class="btnCancel">{{(lang==\'en\')?\'cancel\':\'отмена\'}}</button>\n      <button class="btnOk" (click)="submit()">{{(lang==\'en\')?\'ok\':\'ок\'}}</button>\n    </div>\n  \n  </div>',styles:[".row{display:flex;flex-direction:row}.col{display:flex;position:relative;flex-direction:column;flex:1;justify-content:center;align-items:center;font-size:.8em;padding:4px;border-radius:2px;cursor:pointer;color:#c7c7c7;-webkit-animation:.2s ease-in slide-up;animation:.2s ease-in slide-up;text-align:center}@-webkit-keyframes slide-up{0%{opacity:.5}100%{opacity:1}}@keyframes slide-up{0%{opacity:.5}100%{opacity:1}}.col.markedPeriod{background:#d5ebff!important;border-radius:0!important;transition:.2s}.col.isSelected.markedPeriod{border-radius:2px!important}.col.isSelected{background:#5eb3fc!important;color:#fff!important}.dateBtn{float:left;background:#f3f3f3;border:0;font-size:.74em;color:#2fafff;outline:0;border-radius:2px;cursor:pointer;margin:2px;padding:2px 4px}.dateBtn:hover{background:#6398e0;color:#fff}.col.currentMonth{color:#353540}.col.isNowDate{color:#3f92ff}.col.isWeekEnd.currentMonth{color:#c53c3c}.col.disabled{background:#f5f5f5;color:#afafaf}.col.month:hover,.col:hover{background:#eee}.col.month{font-size:11px;color:#545454;padding:16px 8px;box-shadow:0 0 0 1px #f4f3f3;background:#fff;border-radius:0;min-width:40px}.col.h{color:#ff9a19;text-transform:uppercase}.col.h:hover{background:#fff}.calendar{float:left;box-shadow:0 3px 12px -5px #000;max-width:200px;-webkit-animation:50ms slide-up;animation:50ms slide-up;background:#fff;border-radius:8px}.btnPrevNext{font-size:14px;padding:6px 8px;border-radius:2px;color:#5eb3fc;text-decoration:none}.btnPrevNext:hover{background:#f4f3f3}.yearBtn{font-size:14px;padding:6px 10px;border-radius:2px;color:#585858;cursor:pointer}.yearBtn:hover{background:#f4f3f3}.btnOk{border:0;background:#5eb3fc;padding:8px 16px;color:#fff;border-radius:2px;outline:0;cursor:pointer}.btnOk:hover{background:#3e99e6}.btnCancel{border:0;background:#fff;padding:8px 16px;color:#5eb3fc;border-radius:2px;outline:0;cursor:pointer}.btnCancel:hover{background:#e4f3ff}"]}]}],l.ctorParameters=function(){return[]},l.propDecorators={options:[{type:n.Input}],visible:[{type:n.Input}],onChangeDate:[{type:n.Input}],onChanged:[{type:n.Output}],onClickOut:[{type:n.Output}],dates:[{type:n.Input}]},l);function l(){this.onChanged=new n.EventEmitter,this.onClickOut=new n.EventEmitter,this.today={date:new Date,yearDayNum:this.getNumOfYear(new Date)},this.yesterday=new Date,this.countMonths=1,this.weekStart=1,this.weekends=[5,6],this.monthCalend=[]}var h=(c.prototype.ngOnInit=function(){this.hour=this.date.date.getHours(),this.minute=this.date.date.getMinutes(),this.date.date.setHours(this.hour,this.minute),this.inited=!0},c.prototype.ngOnChanges=function(){this.inited&&this.date.date.setHours(this.hour,this.minute)},c.prototype.change=function(){var e=this.date.date;e.setHours(this.hour,this.minute),this.changed.emit(e)},c.prototype.hourChange=function(){this.change()},c.prototype.minuteChange=function(){this.change()},c.prototype.getTimeArays=function(){for(var e={min:[],hour:[]},t=0;t<60;t++){var n=t.toString(),a={val:t,label:n=1==n.length?"0"+n:n};e.min.push(a),t<24&&e.hour.push(a)}return e},c.decorators=[{type:n.Component,args:[{selector:"ns-time",template:'<div style="display: flex;flex-direction: row;justify-content: space-between;align-items: center; padding: 4px;color: #6f6f6f;background: linear-gradient(90deg,#fff, #e7f4ff); ">\n  <div >{{date.date.getDate()}}.{{date.date.getMonth()+1}}.{{date.date.getFullYear()}} </div>\n    <div>\n      <select [(ngModel)]="hour"  (change)="hourChange()"  style="border: 0; background: transparent; padding: 2px;font-size: 11px; outline: none;">\n        <option *ngFor="let hour of getTimeArays()[\'hour\']" [ngValue]="hour.val">{{hour.label}}</option>\n      </select>\n      <select [(ngModel)]="minute" (change)="minuteChange()" style="border: 0; background: transparent; padding: 2px;font-size: 11px; outline: none;">\n        <option *ngFor="let min of getTimeArays()[\'min\']" [ngValue]="min.val">{{min.label}}</option>\n      </select>\n    </div>\n\n</div>',styles:[""]}]}],c.ctorParameters=function(){return[]},c.propDecorators={date:[{type:n.Input}],changed:[{type:n.Output}]},c);function c(){this.changed=new n.EventEmitter,this.inited=!1}var u=(p.prototype.ngOnInit=function(){},p.decorators=[{type:n.Component,args:[{selector:"ns-col",template:"<p>\n  col works!\n</p>\n",styles:[""]}]}],p.ctorParameters=function(){return[]},p);function p(){}var y=(f.decorators=[{type:n.NgModule,args:[{declarations:[d,s,h,u],imports:[t.BrowserModule,a.FormsModule],exports:[d]}]}],f);function f(){}e.DatepickerService=i,e.Outside=s,e.DatepickerComponent=d,e.DatepickerModule=y,e.ɵb=u,e.ɵa=h,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=datepicker-ns.umd.min.js.map